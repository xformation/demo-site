<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:webflow-config="http://www.springframework.org/schema/webflow-config"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/webflow-config
			http://www.springframework.org/schema/webflow-config/spring-webflow-config.xsd">

	<!-- Root Context: defines shared resources visible to all other web components -->
	<bean id="demoProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="location" value="classpath:demo.properties" />
	</bean>

	<!-- Add multipart action handler bean -->
	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
		<property name="maxUploadSize" value="${file.upload.max.size}"/>
	</bean>

	<!-- Create rest template bean -->
	<bean id="restTemplate" class="org.springframework.web.client.RestTemplate"/>

	<!-- Work-flow configuration for order handling -->
	<webflow-config:flow-executor id="flowExecutor" flow-registry="flowRegistry" />

	<webflow-config:flow-registry id="flowRegistry" base-path="/WEB-INF/flows">
		<webflow-config:flow-location path="/checkout/checkout-flow.xml"
			id="checkout" />
	</webflow-config:flow-registry>

	<bean id="flowHandlerMapping" class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
		<property name="flowRegistry" ref="flowRegistry" />
	</bean>

	<bean id="flowHandlerAdapter" class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
		<property name="flowExecutor" ref="flowExecutor" />
	</bean>

	<!-- schemas (initservice) beans -->
	<bean id="amazonAWSCredentials" class="com.amazonaws.auth.BasicAWSCredentials">
		<constructor-arg value="${amazon.aws.accesskey}" />
		<constructor-arg value="${amazon.aws.secretkey}" />
	</bean>
	<bean id="amazonDynamoDB" class="com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient">
		<constructor-arg ref="amazonAWSCredentials" />
		<property name="endpoint" value="${amazon.dynamodb.endpoint}" />
	</bean>
	<bean id="dynamoDBMapper" class="com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper">
		<constructor-arg ref="amazonDynamoDB"/>
	</bean>

	<!-- commons beans -->
	<bean id="esEventPublisher" class="com.synectiks.commons.publisher.ESEventPublisher"/>
	<bean id="esEventReceiver" class="com.synectiks.commons.receiver.ESEventReceiver"/>

</beans>
